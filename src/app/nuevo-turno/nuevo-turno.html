<div class="head">
    <h3>Turnos Disponibles para la Especialidad:  </h3>
    <div class="select-container"> 
        <mat-select name="especialidad" id="" [value]="especialidadSeleccionada" placeholder="Seleccionar Especialidad" (selectionChange)="cambiarEspecialidad($event)" >
            @for (especialidad of listaEspecialidades; track $index) {
                <mat-option [value]="especialidad.uid" > {{especialidad.nombre}} </mat-option>
            }
        </mat-select>
        <mat-spinner *ngIf="cargandoTurnos" diameter="24"></mat-spinner>
    </div>
</div>

<div>
    <div class="contenedor-tablas">
    @for (fecha of fechasDisponibles; track $index) {

        <h3 class="titulo-fecha">
        <mat-icon>event</mat-icon> {{ fecha }}
        </h3>

        <table mat-table [dataSource]="turnosPorFecha[fecha]" class="mat-elevation-z8 tabla-turnos">

        <!-- Especialista -->
        <ng-container matColumnDef="especialista">
            <th mat-header-cell *matHeaderCellDef> Especialista </th>
            <td mat-cell *matCellDef="let turno"> {{ turno.especialista }} </td>
        </ng-container>

        <!-- Hora -->
        <ng-container matColumnDef="hora">
            <th mat-header-cell *matHeaderCellDef> Hora </th>
            <td mat-cell *matCellDef="let turno"> {{ turno.hora }} </td>
        </ng-container>

        <!-- Estado -->
        <ng-container matColumnDef="estado">
            <th mat-header-cell *matHeaderCellDef> Estado </th>
            <td mat-cell *matCellDef="let turno">
            <span class="estado {{ turno.estado }}">
                {{ turno.estado }}
            </span>
            </td>
        </ng-container>

        <!-- Acciones -->
        <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef> Acciones </th>
            <td mat-cell *matCellDef="let turno">
            <button class="btn-icono" type="button" mat-icon-button  matTooltip="Solicitar Turno" (click)="solicitarTurno(turno)" >
                <fa-icon [icon]="faHandPointer">  </fa-icon>
            </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnas"></tr>
        <tr mat-row *matRowDef="let row; columns: columnas;"></tr>

        </table>
    }
    </div>
    <button mat-button (click)="cancelar()">Cancelar</button>  
</div>