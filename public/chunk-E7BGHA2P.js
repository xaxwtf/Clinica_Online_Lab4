import{B as K,C as D,D as oe,E as J,G as Yt,H as be,I as Xt,J as Zt,a as xt,b as Ge,c as Ft,d as Vt,e as Ht,f as Bt,g as ie,h as Wt,i as $t,j as qt,k as zt,l as jt,m as Gt,n as Kt,o as ye,q as se,t as Jt,x as we}from"./chunk-QFAIQ2LR.js";import{$ as Te,ea as G}from"./chunk-7EJ4QSIG.js";import{a as E,b as B,c as je,g as c}from"./chunk-RA2WU32H.js";var ve=class t{firestore=G(we);constructor(){}cargarEspecialidades(){return c(this,null,function*(){let e=K(this.firestore,"Especialidades");return(yield J(e)).docs.map(r=>({id:r.id,nombre:r.data().nombre}))})}obtenerOcrearEspecialidad(e){return c(this,null,function*(){let n=e.trim().toLowerCase().replace(/\s+/g,"_"),r=D(this.firestore,`Especialidades/${n}`);return(yield oe(r)).exists()||(yield be(r,{nombre:e})),n})}getAllEspecialidades(){return c(this,null,function*(){let e=K(this.firestore,"Especialidades");try{return(yield J(e)).docs.map(r=>({uid:r.id,nombre:r.data().nombre}))}catch(n){return console.error("Error al obtener especialidades:",n),[]}})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})};var Qt=()=>{};var en=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yr=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},tn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,g=l&63;u||(g=64,o||(p=64)),r.push(n[d],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(en(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yr(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Je;let p=s<<2|a>>4;if(r.push(p),l!==64){let g=a<<4&240|l>>2;if(r.push(g),f!==64){let y=l<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Je=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},wr=function(t){let e=en(t);return tn.encodeByteArray(e,!0)},Xe=function(t){return wr(t).replace(/\./g,"")},Re=function(t){try{return tn.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function br(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vr=()=>br().__FIREBASE_DEFAULTS__,Rr=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ar=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Re(t[1]);return e&&JSON.parse(e)},Sr=()=>{try{return Qt()||vr()||Rr()||Ar()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var nn=t=>Sr()?.[`_${t}`];function Ze(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function A(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(A())}function sn(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function on(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function an(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cn(){try{return typeof indexedDB=="object"}catch{return!1}}function un(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var kr="FirebaseError",R=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kr,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}},L=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Pr(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new R(i,a,r)}};function Pr(t,e){return t.replace(Cr,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Cr=/\{\$([^}]+)}/g;function Qe(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Y(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function X(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ln(t,e){let n=new Ye(t,e);return n.subscribe.bind(n)}var Ye=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Or(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ke),i.error===void 0&&(i.error=Ke),i.complete===void 0&&(i.complete=Ke);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Or(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ke(){}var Po=14400*1e3;function F(t){return t&&t._delegate?t._delegate:t}var U=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Nr=[],m=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(m||{}),Dr={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},Lr=m.INFO,Ur={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Mr=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Ur[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Z=class{constructor(e){this.name=e,this._logLevel=Lr,this._logHandler=Mr,this._userLogHandler=null,Nr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in m))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...e),this._logHandler(this,m.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...e),this._logHandler(this,m.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,m.INFO,...e),this._logHandler(this,m.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,m.WARN,...e),this._logHandler(this,m.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...e),this._logHandler(this,m.ERROR,...e)}};var tt=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Fr(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Fr(t){return t.getComponent()?.type==="VERSION"}var nt="@firebase/app",dn="0.14.6";var M=new Z("@firebase/app"),Vr="@firebase/app-compat",Hr="@firebase/analytics-compat",Br="@firebase/analytics",Wr="@firebase/app-check-compat",$r="@firebase/app-check",qr="@firebase/auth",zr="@firebase/auth-compat",jr="@firebase/database",Gr="@firebase/data-connect",Kr="@firebase/database-compat",Jr="@firebase/functions",Yr="@firebase/functions-compat",Xr="@firebase/installations",Zr="@firebase/installations-compat",Qr="@firebase/messaging",ei="@firebase/messaging-compat",ti="@firebase/performance",ni="@firebase/performance-compat",ri="@firebase/remote-config",ii="@firebase/remote-config-compat",si="@firebase/storage",oi="@firebase/storage-compat",ai="@firebase/firestore",ci="@firebase/ai",ui="@firebase/firestore-compat",li="firebase",di="12.6.0";var hi={[nt]:"fire-core",[Vr]:"fire-core-compat",[Br]:"fire-analytics",[Hr]:"fire-analytics-compat",[$r]:"fire-app-check",[Wr]:"fire-app-check-compat",[qr]:"fire-auth",[zr]:"fire-auth-compat",[jr]:"fire-rtdb",[Gr]:"fire-data-connect",[Kr]:"fire-rtdb-compat",[Jr]:"fire-fn",[Yr]:"fire-fn-compat",[Xr]:"fire-iid",[Zr]:"fire-iid-compat",[Qr]:"fire-fcm",[ei]:"fire-fcm-compat",[ti]:"fire-perf",[ni]:"fire-perf-compat",[ri]:"fire-rc",[ii]:"fire-rc-compat",[si]:"fire-gcs",[oi]:"fire-gcs-compat",[ai]:"fire-fst",[ui]:"fire-fst-compat",[ci]:"fire-vertex","fire-js":"fire-js",[li]:"fire-js-all"};var fi=new Map,pi=new Map,hn=new Map;function fn(t,e){try{t.container.addComponent(e)}catch(n){M.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ee(t){let e=t.name;if(hn.has(e))return M.debug(`There were multiple attempts to register component ${e}.`),!1;hn.set(e,t);for(let n of fi.values())fn(n,t);for(let n of pi.values())fn(n,t);return!0}function C(t){return t==null?!1:t.settings!==void 0}var mi={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},st=new L("app","Firebase",mi);var Ae=di;function Q(t,e,n){let r=hi[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),M.warn(o.join(" "));return}ee(new U(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var gi="firebase-heartbeat-database",_i=1,ae="firebase-heartbeat-store",et=null;function _n(){return et||(et=$t(gi,_i,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ae)}catch(n){console.warn(n)}}}}).catch(t=>{throw st.create("idb-open",{originalErrorMessage:t.message})})),et}function Ii(t){return c(this,null,function*(){try{let n=(yield _n()).transaction(ae),r=yield n.objectStore(ae).get(In(t));return yield n.done,r}catch(e){if(e instanceof R)M.warn(e.message);else{let n=st.create("idb-get",{originalErrorMessage:e?.message});M.warn(n.message)}}})}function pn(t,e){return c(this,null,function*(){try{let r=(yield _n()).transaction(ae,"readwrite");yield r.objectStore(ae).put(e,In(t)),yield r.done}catch(n){if(n instanceof R)M.warn(n.message);else{let r=st.create("idb-set",{originalErrorMessage:n?.message});M.warn(r.message)}}})}function In(t){return`${t.name}!${t.options.appId}`}var Ei=1024,Ti=30,rt=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new it(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return c(this,null,function*(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mn();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Ti){let i=wi(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){M.warn(e)}})}getHeartbeatsHeader(){return c(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=mn(),{heartbeatsToSend:n,unsentEntries:r}=yi(this._heartbeatsCache.heartbeats),i=Xe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return M.warn(e),""}})}};function mn(){return new Date().toISOString().substring(0,10)}function yi(t,e=Ei){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gn(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gn(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var it=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return c(this,null,function*(){return cn()?un().then(()=>!0).catch(()=>!1):!1})}read(){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Ii(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return pn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return c(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return pn(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function gn(t){return Xe(JSON.stringify({version:2,heartbeats:t})).length}function wi(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function bi(t){ee(new U("platform-logger",e=>new tt(e),"PRIVATE")),ee(new U("heartbeat",e=>new rt(e),"PRIVATE")),Q(nt,dn,t),Q(nt,dn,"esm2020"),Q("fire-js","")}bi("");function Sn(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var kn=Sn,Pn=new L("auth","Firebase",Sn());var Pe=new Z("@firebase/auth");function vi(t,...e){Pe.logLevel<=m.WARN&&Pe.warn(`Auth (${Ae}): ${t}`,...e)}function ke(t,...e){Pe.logLevel<=m.ERROR&&Pe.error(`Auth (${Ae}): ${t}`,...e)}function de(t,...e){throw bt(t,...e)}function wt(t,...e){return bt(t,...e)}function Cn(t,e,n){let r=B(E({},kn()),{[e]:n});return new L("auth","Firebase",r).create(e,{appName:t.name})}function $(t){return Cn(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bt(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Pn.create(t,...e)}function h(t,e,...n){if(!t)throw bt(e,...n)}function x(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ke(e),new Error(e)}function Ce(t,e){t||x(e)}function Ri(){return En()==="http:"||En()==="https:"}function En(){return typeof self<"u"&&self.location?.protocol||null}function Ai(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ri()||on()||"connection"in navigator)?navigator.onLine:!0}function Si(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var q=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ce(n>e,"Short delay should be less than long delay!"),this.isMobile=rn()||an()}get(){return Ai()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ki(t,e){Ce(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Oe=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;x("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;x("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;x("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Pi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ci=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Oi=new q(3e4,6e4);function z(t,e){return t.tenantId&&!e.tenantId?B(E({},e),{tenantId:t.tenantId}):e}function j(s,o,a,u){return c(this,arguments,function*(t,e,n,r,i={}){return On(t,i,()=>c(null,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Qe(E({key:t.config.apiKey},d)).slice(1),p=yield t._getAdditionalHeaders();p["Content-Type"]="application/json",t.languageCode&&(p["X-Firebase-Locale"]=t.languageCode);let g=E({method:e,headers:p},l);return sn()||(g.referrerPolicy="no-referrer"),t.emulatorConfig&&Ze(t.emulatorConfig.host)&&(g.credentials="include"),Oe.fetch()(yield Nn(t,t.config.apiHost,n,f),g)}))})}function On(t,e,n){return c(this,null,function*(){t._canInitEmulator=!1;let r=E(E({},Pi),e);try{let i=new ct(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Se(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Se(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Se(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Se(t,"user-disabled",o);let d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Cn(t,d,l);de(t,d)}}catch(i){if(i instanceof R)throw i;de(t,"network-request-failed",{message:String(i)})}})}function Ve(s,o,a,u){return c(this,arguments,function*(t,e,n,r,i={}){let l=yield j(t,e,n,r,i);return"mfaPendingCredential"in l&&de(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function Nn(t,e,n,r){return c(this,null,function*(){let i=`${e}${n}?${r}`,s=t,o=s.config.emulator?ki(t.config,i):`${t.config.apiScheme}://${i}`;return Ci.includes(n)&&(yield s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o})}function Ni(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var ct=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wt(this.auth,"network-request-failed")),Oi.get())})}};function Se(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=wt(t,e,r);return i.customData._tokenResponse=n,i}function Tn(t){return t!==void 0&&t.enterprise!==void 0}var ut=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ni(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Di(t,e){return c(this,null,function*(){return j(t,"GET","/v2/recaptchaConfig",z(t,e))})}function Li(t,e){return c(this,null,function*(){return j(t,"POST","/v1/accounts:delete",e)})}function Ne(t,e){return c(this,null,function*(){return j(t,"POST","/v1/accounts:lookup",e)})}function ue(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Dn(t,e=!1){return c(this,null,function*(){let n=F(t),r=yield n.getIdToken(e),i=Ln(r);h(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ue(ot(i.auth_time)),issuedAtTime:ue(ot(i.iat)),expirationTime:ue(ot(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ot(t){return Number(t)*1e3}function Ln(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ke("JWT malformed, contained fewer than 3 sections"),null;try{let i=Re(n);return i?JSON.parse(i):(ke("Failed to decode base64 JWT payload"),null)}catch(i){return ke("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yn(t){let e=Ln(t);return h(e,"internal-error"),h(typeof e.exp<"u","internal-error"),h(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lt(t,e,n=!1){return c(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof R&&Ui(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Ui({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var dt=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>c(this,null,function*(){yield this.iteration()}),n)}iteration(){return c(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var he=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ue(this.lastLoginAt),this.creationTime=ue(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function De(t){return c(this,null,function*(){let e=t.auth,n=yield t.getIdToken(),r=yield lt(t,Ne(e,{idToken:n}));h(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let s=i.providerUserInfo?.length?Mn(i.providerUserInfo):[],o=Mi(t.providerData,s),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,l=a?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new he(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function Un(t){return c(this,null,function*(){let e=F(t);yield De(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Mi(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Mn(t){return t.map(r=>{var i=r,{providerId:e}=i,n=je(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function xi(t,e){return c(this,null,function*(){let n=yield On(t,{},()=>c(null,null,function*(){let r=Qe({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=yield Nn(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ze(t.emulatorConfig.host)&&(u.credentials="include"),Oe.fetch()(o,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Fi(t,e){return c(this,null,function*(){return j(t,"POST","/v2/accounts:revokeToken",z(t,e))})}var le=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){h(e.idToken,"internal-error"),h(typeof e.idToken<"u","internal-error"),h(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){h(e.length!==0,"internal-error");let n=yn(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return c(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(h(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return c(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield xi(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(h(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(h(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(h(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return x("not implemented")}};function V(t,e){h(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var H=class t{constructor(s){var o=s,{uid:e,auth:n,stsTokenManager:r}=o,i=je(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new he(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return c(this,null,function*(){let n=yield lt(this,this.stsTokenManager.getToken(this.auth,e));return h(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Dn(this,e)}reload(){return Un(this)}_assign(e){this!==e&&(h(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>E({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(B(E({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){h(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return c(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield De(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return c(this,null,function*(){if(C(this.auth.app))return Promise.reject($(this.auth));let e=yield this.getIdToken();return yield lt(this,Li(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return B(E({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>E({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:y,stsTokenManager:v}=n;h(f&&v,e,"internal-error");let w=le.fromJSON(this.name,v);h(typeof f=="string",e,"internal-error"),V(r,e.name),V(i,e.name),h(typeof p=="boolean",e,"internal-error"),h(typeof g=="boolean",e,"internal-error"),V(s,e.name),V(o,e.name),V(a,e.name),V(u,e.name),V(l,e.name),V(d,e.name);let k=new t({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:w,createdAt:l,lastLoginAt:d});return y&&Array.isArray(y)&&(k.providerData=y.map(N=>E({},N))),u&&(k._redirectEventId=u),k}static _fromIdTokenResponse(e,n,r=!1){return c(this,null,function*(){let i=new le;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield De(s),s})}static _fromGetAccountInfoResponse(e,n,r){return c(this,null,function*(){let i=n.users[0];h(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Mn(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new le;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new he(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var wn=new Map;function W(t){Ce(t instanceof Function,"Expected a class definition");let e=wn.get(t);return e?(Ce(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wn.set(t,e),e)}var Vi=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return c(this,null,function*(){return!0})}_set(n,r){return c(this,null,function*(){this.storage[n]=r})}_get(n){return c(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return c(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ht=Vi;function at(t,e,n){return`firebase:${t}:${e}:${n}`}var Le=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=at(this.userKey,i.apiKey,s),this.fullPersistenceKey=at("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return c(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield Ne(this.auth,{idToken:e}).catch(()=>{});return n?H._fromGetAccountInfoResponse(this.auth,n,e):null}return H._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return c(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return c(this,null,function*(){if(!n.length)return new t(W(ht),e,r);let i=(yield Promise.all(n.map(l=>c(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||W(ht),o=at(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f;if(typeof d=="string"){let p=yield Ne(e,{idToken:d}).catch(()=>{});if(!p)break;f=yield H._fromGetAccountInfoResponse(e,p,d)}else f=H._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>c(null,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function bn(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($i(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hi(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zi(e))return"Blackberry";if(ji(e))return"Webos";if(Bi(e))return"Safari";if((e.includes("chrome/")||Wi(e))&&!e.includes("edge/"))return"Chrome";if(qi(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Hi(t=A()){return/firefox\//i.test(t)}function Bi(t=A()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wi(t=A()){return/crios\//i.test(t)}function $i(t=A()){return/iemobile/i.test(t)}function qi(t=A()){return/android/i.test(t)}function zi(t=A()){return/blackberry/i.test(t)}function ji(t=A()){return/webos/i.test(t)}function xn(t,e=[]){let n;switch(t){case"Browser":n=bn(A());break;case"Worker":n=`${bn(A())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ae}/${r}`}var ft=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return c(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Gi(n){return c(this,arguments,function*(t,e={}){return j(t,"GET","/v2/passwordPolicy",z(t,e))})}var Ki=6,pt=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ki,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var mt=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ue(this),this.idTokenSubscription=new Ue(this),this.beforeStateQueue=new ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=W(n)),this._initializationPromise=this.queue(()=>c(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield Le.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return c(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return c(this,null,function*(){try{let n=yield Ne(this,{idToken:e}),r=yield H._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return c(this,null,function*(){if(C(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return h(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return c(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return c(this,null,function*(){try{yield De(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Si()}_delete(){return c(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return c(this,null,function*(){if(C(this.app))return Promise.reject($(this));let n=e?F(e):null;return n&&h(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return c(this,null,function*(){if(!this._deleted)return e&&h(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>c(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return c(this,null,function*(){return C(this.app)?Promise.reject($(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return C(this.app)?Promise.reject($(this)):this.queue(()=>c(this,null,function*(){yield this.assertedPersistence.setPersistence(W(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return c(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return c(this,null,function*(){let e=yield Gi(this),n=new pt(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new L("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return c(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Fi(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,n){return c(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return c(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&W(e)||this._popupRedirectResolver;h(n,this,"argument-error"),this.redirectPersistenceManager=yield Le.create(this,[W(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return c(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>c(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return c(this,null,function*(){if(e===this.currentUser)return this.queue(()=>c(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(h(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return c(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return h(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return c(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return c(this,null,function*(){if(C(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&vi(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function pe(t){return F(t)}var Ue=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=ln(n=>this.observer=n)}get next(){return h(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vt={loadJS(){return c(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ji(t){vt=t}function Yi(t){return vt.loadJS(t)}function Xi(){return vt.recaptchaEnterpriseScript}function Zi(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var gt=class{constructor(){this.enterprise=new _t}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},_t=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var Qi="recaptcha-enterprise",Fn="NO_RECAPTCHA",It=class{constructor(e){this.type=Qi,this.auth=pe(e)}verify(e="verify",n=!1){return c(this,null,function*(){function r(s){return c(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>c(null,null,function*(){Di(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new ut(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;Tn(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Fn)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gt().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Tn(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Xi();u.length!==0&&(u+=a),Yi(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function ce(t,e,n,r=!1,i=!1){return c(this,null,function*(){let s=new It(t),o;if(i)o=Fn;else try{o=yield s.verify(n)}catch{o=yield s.verify(n,!0)}let a=E({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Et(t,e,n,r,i){return c(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield ce(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>c(null,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield ce(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}));else if(i==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let s=yield ce(t,e,n);return r(t,s).catch(o=>c(null,null,function*(){if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=yield ce(t,e,n,!1,!0);return r(t,a)}return Promise.reject(o)}))}else{let s=yield ce(t,e,n,!1,!0);return r(t,s)}else return Promise.reject(i+" provider is not supported.")})}function es(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(W);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var Me=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return x("not implemented")}_getIdTokenResponse(e){return x("not implemented")}_linkToIdToken(e,n){return x("not implemented")}_getReauthenticationResolver(e){return x("not implemented")}};function ts(t,e){return c(this,null,function*(){return j(t,"POST","/v1/accounts:signUp",e)})}function ns(t,e){return c(this,null,function*(){return Ve(t,"POST","/v1/accounts:signInWithPassword",z(t,e))})}function rs(t,e){return c(this,null,function*(){return Ve(t,"POST","/v1/accounts:signInWithEmailLink",z(t,e))})}function is(t,e){return c(this,null,function*(){return Ve(t,"POST","/v1/accounts:signInWithEmailLink",z(t,e))})}var fe=class t extends Me{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return c(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Et(e,n,"signInWithPassword",ns,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rs(e,{email:this._email,oobCode:this._password});default:de(e,"internal-error")}})}_linkToIdToken(e,n){return c(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Et(e,r,"signUpPassword",ts,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return is(e,{idToken:n,email:this._email,oobCode:this._password});default:de(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ss(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function os(t){let e=Y(X(t)).link,n=e?Y(X(e)).deep_link_id:null,r=Y(X(t)).deep_link_id;return(r?Y(X(r)).link:null)||r||n||e||t}var xe=class t{constructor(e){let n=Y(X(e)),r=n.apiKey??null,i=n.oobCode??null,s=ss(n.mode??null);h(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){let n=os(e);try{return new t(n)}catch{return null}}};var Vn=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return fe._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=xe.parseLink(r);return h(i,"argument-error"),fe._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})();function as(t,e){return c(this,null,function*(){return Ve(t,"POST","/v1/accounts:signUp",z(t,e))})}var Fe=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return c(this,null,function*(){let s=yield H._fromIdTokenResponse(e,r,i),o=vn(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return c(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=vn(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function vn(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Tt=class t extends R{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function cs(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Tt._fromErrorAndOperation(t,s,e,r):s})}function us(t,e,n=!1){return c(this,null,function*(){if(C(t.app))return Promise.reject($(t));let r="signIn",i=yield cs(t,r,e),s=yield Fe._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Hn(t,e){return c(this,null,function*(){return us(pe(t),e)})}function Bn(t){return c(this,null,function*(){let e=pe(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Rt(t,e,n){return c(this,null,function*(){if(C(t.app))return Promise.reject($(t));let r=pe(t),o=yield Et(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",as,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Bn(t),u}),a=yield Fe._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function ls(t,e,n){return C(t.app)?Promise.reject($(t)):Hn(F(t),Vn.credential(e,n)).catch(r=>c(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Bn(t),r}))}function At(t,e,n,r){return F(t).onAuthStateChanged(e,n,r)}function ds(t){return F(t).signOut()}var ca=Zi("rcb"),ua=new q(3e4,6e4);var la=new q(2e3,1e4);var da=600*1e3;var ha=new q(3e4,6e4);var fa=new q(5e3,15e3);var pa=encodeURIComponent("fac");var Rn="@firebase/auth",An="1.11.1";var yt=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return c(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){h(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function hs(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fs(t){ee(new U("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;h(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xn(t)},l=new mt(r,i,s,u);return es(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ee(new U("auth-internal",e=>{let n=pe(e.getProvider("auth").getImmediate());return(r=>new yt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Q(Rn,An,hs(t)),Q(Rn,An,"esm2020")}var ps=300,ma=nn("authIdTokenMaxAge")||ps;function ms(){return document.getElementsByTagName("head")?.[0]??document}Ji({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=wt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ms().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fs("Browser");var Kn="firebasestorage.googleapis.com",Jn="storageBucket",gs=120*1e3,_s=600*1e3;var _=class t extends Bt{constructor(e,n,r=0){super(St(e),`Firebase Storage: ${n} (${St(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return St(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},I=(function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t})(I||{});function St(t){return"storage/"+t}function Dt(){let t="An unknown error occurred, please check the error payload for server response.";return new _(I.UNKNOWN,t)}function Is(t){return new _(I.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Es(t){return new _(I.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ts(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _(I.UNAUTHENTICATED,t)}function ys(){return new _(I.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ws(t){return new _(I.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bs(){return new _(I.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vs(){return new _(I.CANCELED,"User canceled the upload/download.")}function Rs(t){return new _(I.INVALID_URL,"Invalid URL '"+t+"'.")}function As(t){return new _(I.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ss(){return new _(I.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Jn+"' property when initializing the app?")}function ks(){return new _(I.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ps(){return new _(I.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Cs(t){return new _(I.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kt(t){return new _(I.INVALID_ARGUMENT,t)}function Yn(){return new _(I.APP_DELETED,"The Firebase app was deleted.")}function Os(t){return new _(I.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ge(t,e){return new _(I.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function me(t){throw new _(I.INTERNAL_ERROR,"Internal error: "+t)}var S=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw As(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(b){b.path_=decodeURIComponent(b.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${d}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},v=n===Kn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",k=new RegExp(`^https?://${v}/${i}/${w}`,"i"),P=[{regex:a,indices:u,postModify:s},{regex:g,indices:y,postModify:l},{regex:k,indices:{bucket:1,path:2},postModify:l}];for(let b=0;b<P.length;b++){let Ee=P[b],qe=Ee.regex.exec(e);if(qe){let Er=qe[Ee.indices.bucket],ze=qe[Ee.indices.path];ze||(ze=""),r=new t(Er,ze),Ee.postModify(r);break}}if(r==null)throw Rs(e);return r}},Pt=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Ns(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function d(...w){l||(l=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,t(g,u())},w)}function p(){s&&clearTimeout(s)}function g(w,...k){if(l){p();return}if(w){p(),d.call(null,w,...k);return}if(u()||o){p(),d.call(null,w,...k);return}r<64&&(r*=2);let P;a===1?(a=2,P=0):P=(r+Math.random())*1e3,f(P)}let y=!1;function v(w){y||(y=!0,p(),!l&&(i!==null?(w||(a=2),clearTimeout(i),f(0)):w||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function Ds(t){t(!1)}function Ls(t){return t!==void 0}function Us(t){return typeof t=="object"&&!Array.isArray(t)}function Lt(t){return typeof t=="string"||t instanceof String}function Wn(t){return Ut()&&t instanceof Blob}function Ut(){return typeof Blob<"u"}function $n(t,e,n,r){if(r<e)throw kt(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw kt(`Invalid value for '${t}'. Expected ${n} or less.`)}function Mt(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Xn(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ne=(function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t})(ne||{});function Ms(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Ct=class{constructor(e,n,r,i,s,o,a,u,l,d,f,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,v)=>{this.resolve_=y,this.reject_=v,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new te(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===ne.NO_ERROR,u=s.getStatus();if(!a||Ms(u,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===ne.ABORT;r(!1,new te(!1,null,d));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new te(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());Ls(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=Dt();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?Yn():vs();o(u)}else{let u=bs();o(u)}};this.canceled_?n(!1,new te(!1,null,!0)):this.backoffId_=Ns(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ds(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},te=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function xs(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Fs(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Vs(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Hs(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Bs(t,e,n,r,i,s,o=!0,a=!1){let u=Xn(t.urlParams),l=t.url+u,d=Object.assign({},t.headers);return Vs(d,e),xs(d,n),Fs(d,s),Hs(d,r),new Ct(l,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function Ws(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $s(...t){let e=Ws();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ut())return new Blob(t);throw new _(I.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qs(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function zs(t){if(typeof atob>"u")throw Cs("base-64");return atob(t)}var O={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},_e=class{constructor(e,n){this.data=e,this.contentType=n||null}};function js(t,e){switch(t){case O.RAW:return new _e(Zn(e));case O.BASE64:case O.BASE64URL:return new _e(Qn(t,e));case O.DATA_URL:return new _e(Ks(e),Js(e))}throw Dt()}function Zn(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Gs(t){let e;try{e=decodeURIComponent(t)}catch{throw ge(O.DATA_URL,"Malformed data URL.")}return Zn(e)}function Qn(t,e){switch(t){case O.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ge(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case O.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ge(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zs(e)}catch(i){throw i.message.includes("polyfill")?i:ge(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Be=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw ge(O.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=Ys(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Ks(t){let e=new Be(t);return e.base64?Qn(O.BASE64,e.rest):Gs(e.rest)}function Js(t){return new Be(t).contentType}function Ys(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var We=class t{constructor(e,n){let r=0,i="";Wn(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Wn(this.data_)){let r=this.data_,i=qs(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(Ut()){let n=e.map(r=>r instanceof t?r.data_:r);return new t($s.apply(null,n))}else{let n=e.map(o=>Lt(o)?js(O.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function er(t){let e;try{e=JSON.parse(t)}catch{return null}return Us(e)?e:null}function Xs(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Zs(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function tr(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function Qs(t,e){return e}var T=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Qs}},He=null;function eo(t){return!Lt(t)||t.length<2?t:tr(t)}function nr(){if(He)return He;let t=[];t.push(new T("bucket")),t.push(new T("generation")),t.push(new T("metageneration")),t.push(new T("name","fullPath",!0));function e(s,o){return eo(o)}let n=new T("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new T("size");return i.xform=r,t.push(i),t.push(new T("timeCreated")),t.push(new T("updated")),t.push(new T("md5Hash",null,!0)),t.push(new T("cacheControl",null,!0)),t.push(new T("contentDisposition",null,!0)),t.push(new T("contentEncoding",null,!0)),t.push(new T("contentLanguage",null,!0)),t.push(new T("contentType",null,!0)),t.push(new T("metadata","customMetadata",!0)),He=t,He}function to(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new S(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function no(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return to(r,t),r}function rr(t,e,n){let r=er(e);return r===null?null:no(t,r,n)}function ro(t,e,n,r){let i=er(e);if(i===null||!Lt(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let d=t.bucket,f=t.fullPath,p="/b/"+o(d)+"/o/"+o(f),g=Mt(p,n,r),y=Xn({alt:"media",token:l});return g+y})[0]}function io(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var $e=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function ir(t){if(!t)throw Dt()}function so(t,e){function n(r,i){let s=rr(t,i,e);return ir(s!==null),s}return n}function oo(t,e){function n(r,i){let s=rr(t,i,e);return ir(s!==null),ro(s,i,t.host,t._protocol)}return n}function sr(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ys():i=Ts():n.getStatus()===402?i=Es(t.bucket):n.getStatus()===403?i=ws(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function ao(t){let e=sr(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Is(t.path)),s.serverResponse=i.serverResponse,s}return n}function co(t,e,n){let r=e.fullServerUrl(),i=Mt(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new $e(i,s,oo(t,n),o);return a.errorHandler=ao(e),a}function uo(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function lo(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=uo(null,e)),r}function ho(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let P="";for(let b=0;b<2;b++)P=P+Math.random().toString().slice(2);return P}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=lo(e,r,i),d=io(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,p=`\r
--`+u+"--",g=We.getBlob(f,r,p);if(g===null)throw ks();let y={name:l.fullPath},v=Mt(s,t.host,t._protocol),w="POST",k=t.maxUploadRetryTime,N=new $e(v,w,so(t,n),k);return N.urlParams=y,N.headers=o,N.body=g.uploadData(),N.errorHandler=sr(e),N}var Gc=256*1024;var qn=null,Ot=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ne.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ne.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ne.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw me("cannot .send() more than once");if(Ge(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(let o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw me("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw me("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw me("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw me("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},Nt=class extends Ot{initXhr(){this.xhr_.responseType="text"}};function or(){return qn?qn():new Nt}var re=class t{constructor(e,n){this._service=e,n instanceof S?this._location=n:this._location=S.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new S(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tr(this._location.path)}get storage(){return this._service}get parent(){let e=Xs(this._location.path);if(e===null)return null;let n=new S(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Os(e)}};function fo(t,e,n){t._throwIfRoot("uploadBytes");let r=ho(t.storage,t._location,nr(),new We(e,!0),n);return t.storage.makeRequestWithTokens(r,or).then(i=>({metadata:i,ref:t}))}function po(t){t._throwIfRoot("getDownloadURL");let e=co(t.storage,t._location,nr());return t.storage.makeRequestWithTokens(e,or).then(n=>{if(n===null)throw Ps();return n})}function mo(t,e){let n=Zs(t._location.path,e),r=new S(t._location.bucket,n);return new re(t.storage,r)}function go(t){return/^[A-Za-z]+:\/\//.test(t)}function _o(t,e){return new re(t,e)}function ar(t,e){if(t instanceof Ie){let n=t;if(n._bucket==null)throw Ss();let r=new re(n,n._bucket);return e!=null?ar(r,e):r}else return e!==void 0?mo(t,e):t}function Io(t,e){if(e&&go(e)){if(t instanceof Ie)return _o(t,e);throw kt("To use ref(service, url), the first argument must be a Storage instance.")}else return ar(t,e)}function zn(t,e){let n=e?.[Jn];return n==null?null:S.makeFromBucketSpec(n,t)}function Eo(t,e,n,r={}){t.host=`${e}:${n}`;let i=Ge(e);i&&(Ft(`https://${t.host}/b`),Ht("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";let{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Vt(s,t.app.options.projectId))}var Ie=class{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Kn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gs,this._maxUploadRetryTime=_s,this._requests=new Set,i!=null?this._bucket=S.makeFromBucketSpec(i,this._host):this._bucket=zn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=S.makeFromBucketSpec(this._url,e):this._bucket=zn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$n("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$n("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return c(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return c(this,null,function*(){if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new re(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Pt(Yn());{let o=Bs(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return c(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},jn="@firebase/storage",Gn="0.13.14";var cr="storage";function ur(t,e,n){return t=ie(t),fo(t,e,n)}function lr(t){return t=ie(t),po(t)}function dr(t,e){return t=ie(t),Io(t,e)}function hr(t=Kt(),e){t=ie(t);let r=zt(t,cr).getImmediate({identifier:e}),i=xt("storage");return i&&fr(r,...i),r}function fr(t,e,n,r={}){Eo(t,e,n,r)}function To(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ie(n,r,i,e,Gt)}function yo(){qt(new Wt(cr,To,"PUBLIC").setMultipleInstances(!0)),ye(jn,Gn,""),ye(jn,Gn,"esm2017")}yo();var pr=se(lr,!0);var mr=se(hr,!0);var gr=se(dr,!0,2);var _r=se(ur,!0);var Ir=class t{auth=G(Jt);firestore=G(we);especialidadesService=G(ve);constructor(){}register(e,n,r,i){return c(this,null,function*(){let s=yield Rt(this.auth,e,n);if(i&&i.length>0){let a=mr();Array.isArray(r.ImagenesDePerfil)?r.ImagenesDePerfil=r.ImagenesDePerfil.filter(u=>u!=null):r.ImagenesDePerfil=[];for(let u of i){let l=gr(a,`usuarios/${s.user.uid}/${u.name}`);yield _r(l,u);let d=yield pr(l);d&&r.ImagenesDePerfil.push(d)}r.ImagenesDePerfil=r.ImagenesDePerfil.slice(0,2)}if("especialidad"in r&&Array.isArray(r.especialidad)){let a=[];for(let u of r.especialidad){let l=yield this.especialidadesService.obtenerOcrearEspecialidad(u),d=D(this.firestore,`Especialidades/${l}`);a.push(d)}r.especialidad=[...r.especialidad],r.especialidadRef=a}let o=B(E({},r),{ImagenesDePerfil:(r.ImagenesDePerfil||[]).filter(a=>a!=null),uid:s.user.uid,uidRef:D(this.firestore,"Usuarios",s.user.uid),Email:s.user.email,creado:new Date});return yield be(D(this.firestore,"Usuarios",s.user.uid),o),s})}getUserLoged(){return c(this,null,function*(){return new Promise(e=>{At(this.auth,n=>c(this,null,function*(){if(!n)return e(null);let r=D(this.firestore,"Usuarios",n.uid),i=yield oe(r);if(!i.exists())return e(null);e(i.data())}))})})}getUsuariosByCampo(e,n){return c(this,null,function*(){let r=Yt(K(this.firestore,"Usuarios"),Zt(e,"==",n));return(yield J(r)).docs.map(s=>E({uid:s.id},s.data()))})}actualizarEstadoEspecialista(e,n){return c(this,null,function*(){let r=D(this.firestore,"Usuarios",e);yield Xt(r,{activo:n})})}obtenerUsuario(e){return c(this,null,function*(){let n=D(this.firestore,"Usuarios",e),r=yield oe(n);return r.exists()?E({uid:e},r.data()):null})}getAllUsuarios(){return c(this,null,function*(){let e=K(this.firestore,"Usuarios");return(yield J(e)).docs.map(r=>E({uid:r.id},r.data()))})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})};export{ls as a,ds as b,ve as c,Ir as d};
