import{a as mt}from"./chunk-NXW4M5VV.js";import{a as Le}from"./chunk-SOFOOP2O.js";import{a as Ue}from"./chunk-PBCS3AN4.js";import"./chunk-F34TZV5U.js";import{c as Me,f as Ae,i as Ne,r as ke}from"./chunk-EHXU5XNA.js";import"./chunk-BYXBJQAS.js";import"./chunk-WKMSXF5P.js";import{c as Pe,d as He}from"./chunk-E7BGHA2P.js";import"./chunk-QFAIQ2LR.js";import{Gb as M,Hb as R,Ib as K,Pb as Re,Rb as fe,Xb as Q,Ya as ne,Yb as J,Zb as X,ea as ie,fc as V,ja as W,jc as oe,ka as z,kc as re,lc as se,nb as Fe}from"./chunk-7EJ4QSIG.js";import{a as ge,d as ft,e as Oe,g as O}from"./chunk-RA2WU32H.js";var _e=ft((ae,me)=>{"use strict";(function(A,m){typeof ae=="object"&&typeof me=="object"?me.exports=m(A._Highcharts,A._Highcharts.AST,A._Highcharts.Chart):typeof define=="function"&&define.amd?define("highcharts/modules/exporting",["highcharts/highcharts"],function(x){return m(x,x.AST,x.Chart)}):typeof ae=="object"?ae["highcharts/modules/exporting"]=m(A._Highcharts,A._Highcharts.AST,A._Highcharts.Chart):A.Highcharts=m(A.Highcharts,A.Highcharts.AST,A.Highcharts.Chart)})(typeof window>"u"?ae:window,(A,m,x)=>(()=>{"use strict";var p,f,E={660:s=>{s.exports=m},944:s=>{s.exports=A},960:s=>{s.exports=x}},S={};function T(s){var e=S[s];if(e!==void 0)return e.exports;var t=S[s]={exports:{}};return E[s](t,t.exports,T),t.exports}T.n=s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return T.d(e,{a:e}),e},T.d=(s,e)=>{for(var t in e)T.o(e,t)&&!T.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:e[t]})},T.o=(s,e)=>Object.prototype.hasOwnProperty.call(s,e);var w={};T.d(w,{default:()=>gt});var N=T(944),H=T.n(N),Be=T(660),le=T.n(Be),Ge=T(960),je=T.n(Ge);(function(s){s.compose=function(t){return t.navigation||(t.navigation=new e(t)),t};class e{constructor(o){this.updates=[],this.chart=o}addUpdate(o){this.chart.navigation.updates.push(o)}update(o,i){this.updates.forEach(n=>{n.call(this.chart,o,i)})}}s.Additions=e})(p||(p={}));let We=p,{isSafari:ze,win:P,win:{document:Z}}=H(),{error:$e}=H(),ye=P.URL||P.webkitURL||P;function xe(s){let e=s.replace(/filename=.*;/,"").match(/data:([^;]*)(;base64)?,([A-Z+\d\/]+)/i);if(e&&e.length>3&&P.atob&&P.ArrayBuffer&&P.Uint8Array&&P.Blob&&ye.createObjectURL){let t=P.atob(e[3]),o=new P.ArrayBuffer(t.length),i=new P.Uint8Array(o);for(let n=0;n<i.length;++n)i[n]=t.charCodeAt(n);return ye.createObjectURL(new P.Blob([i],{type:e[1]}))}}let{isTouchDevice:qe}=H(),Ke={exporting:{allowTableSorting:!0,libURL:"https://code.highcharts.com/12.4.0/lib/",local:!0,type:"image/png",url:`https://export-svg.highcharts.com?v=${H().version}`,pdfFont:{normal:void 0,bold:void 0,bolditalic:void 0,italic:void 0},printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",titleKey:"contextButtonTitle",menuItems:["viewFullscreen","printChart","separator","downloadPNG","downloadJPEG","downloadSVG"]}},menuItemDefinitions:{viewFullscreen:{textKey:"viewFullscreen",onclick:function(){this.fullscreen?.toggle()}},printChart:{textKey:"printChart",onclick:function(){this.exporting?.print()}},separator:{separator:!0},downloadPNG:{textKey:"downloadPNG",onclick:function(){return O(this,null,function*(){yield this.exporting?.exportChart()})}},downloadJPEG:{textKey:"downloadJPEG",onclick:function(){return O(this,null,function*(){yield this.exporting?.exportChart({type:"image/jpeg"})})}},downloadPDF:{textKey:"downloadPDF",onclick:function(){return O(this,null,function*(){yield this.exporting?.exportChart({type:"application/pdf"})})}},downloadSVG:{textKey:"downloadSVG",onclick:function(){return O(this,null,function*(){yield this.exporting?.exportChart({type:"image/svg+xml"})})}}}},lang:{viewFullscreen:"View in full screen",exitFullscreen:"Exit from full screen",printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"},navigation:{buttonOptions:{symbolSize:14,symbolX:14.5,symbolY:13.5,align:"right",buttonSpacing:5,height:28,y:-5,verticalAlign:"top",width:28,symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",padding:5,stroke:"none","stroke-linecap":"round"}},menuStyle:{border:"none",borderRadius:"3px",background:"#ffffff",padding:"0.5em"},menuItemStyle:{background:"none",borderRadius:"3px",color:"#333333",padding:"0.5em",fontSize:qe?"0.9em":"0.8em",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#f2f2f2"}}};(function(s){let e=[];function t(i,n,r,d){return[["M",i,n+2.5],["L",i+r,n+2.5],["M",i,n+d/2+.5],["L",i+r,n+d/2+.5],["M",i,n+d-1.5],["L",i+r,n+d-1.5]]}function o(i,n,r,d){let a=d/3-2;return[].concat(this.circle(r-a,n,a,a),this.circle(r-a,n+a+4,a,a),this.circle(r-a,n+2*(a+4),a,a))}s.compose=function(i){if(e.indexOf(i)===-1){e.push(i);let n=i.prototype.symbols;n.menu=t,n.menuball=o.bind(n)}}})(f||(f={}));let Qe=f,{composed:Je}=H(),{addEvent:de,fireEvent:we,pushUnique:Xe}=H();function Ye(){this.fullscreen=new ve(this)}class ve{static compose(e){Xe(Je,"Fullscreen")&&de(e,"beforeRender",Ye)}constructor(e){this.chart=e,this.isOpen=!1;let t=e.renderTo;!this.browserProps&&(typeof t.requestFullscreen=="function"?this.browserProps={fullscreenChange:"fullscreenchange",requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen"}:t.mozRequestFullScreen?this.browserProps={fullscreenChange:"mozfullscreenchange",requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen"}:t.webkitRequestFullScreen?this.browserProps={fullscreenChange:"webkitfullscreenchange",requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitExitFullscreen"}:t.msRequestFullscreen&&(this.browserProps={fullscreenChange:"MSFullscreenChange",requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen"}))}close(){let e=this,t=e.chart,o=t.options.chart;we(t,"fullscreenClose",null,function(){e.isOpen&&e.browserProps&&t.container.ownerDocument instanceof Document&&t.container.ownerDocument[e.browserProps.exitFullscreen](),e.unbindFullscreenEvent&&(e.unbindFullscreenEvent=e.unbindFullscreenEvent()),t.setSize(e.origWidth,e.origHeight,!1),e.origWidth=void 0,e.origHeight=void 0,o.width=e.origWidthOption,o.height=e.origHeightOption,e.origWidthOption=void 0,e.origHeightOption=void 0,e.isOpen=!1,e.setButtonText()})}open(){let e=this,t=e.chart,o=t.options.chart;we(t,"fullscreenOpen",null,function(){if(o&&(e.origWidthOption=o.width,e.origHeightOption=o.height),e.origWidth=t.chartWidth,e.origHeight=t.chartHeight,e.browserProps){let i=de(t.container.ownerDocument,e.browserProps.fullscreenChange,function(){e.isOpen?(e.isOpen=!1,e.close()):(t.setSize(null,null,!1),e.isOpen=!0,e.setButtonText())}),n=de(t,"destroy",i);e.unbindFullscreenEvent=()=>{i(),n()};let r=t.renderTo[e.browserProps.requestFullscreen]();r&&r.catch(function(){alert("Full screen is not supported inside a frame.")})}})}setButtonText(){let e=this.chart,t=e.exporting?.divElements,o=e.options.exporting,i=o&&o.buttons&&o.buttons.contextButton.menuItems,n=e.options.lang;if(o&&o.menuItemDefinitions&&n&&n.exitFullscreen&&n.viewFullscreen&&i&&t){let r=t[i.indexOf("viewFullscreen")];r&&le().setElementHTML(r,this.isOpen?n.exitFullscreen:o.menuItemDefinitions.viewFullscreen.text||n.viewFullscreen)}}toggle(){this.isOpen?this.close():this.open()}}let{win:be}=H(),{discardElement:Ze,objectEach:Se}=H(),he={ajax:function(s){let e={json:"application/json",xml:"application/xml",text:"text/plain",octet:"application/octet-stream"},t=new XMLHttpRequest;function o(i,n){s.error&&s.error(i,n)}if(!s.url)return!1;t.open((s.type||"get").toUpperCase(),s.url,!0),s.headers?.["Content-Type"]||t.setRequestHeader("Content-Type",e[s.dataType||"json"]||e.text),Se(s.headers,function(i,n){t.setRequestHeader(n,i)}),s.responseType&&(t.responseType=s.responseType),t.onreadystatechange=function(){let i;if(t.readyState===4){if(t.status===200){if(s.responseType!=="blob"&&(i=t.responseText,s.dataType==="json"))try{i=JSON.parse(i)}catch(n){if(n instanceof Error)return o(t,n)}return s.success?.(i,t)}o(t,t.responseText)}},s.data&&typeof s.data!="string"&&(s.data=JSON.stringify(s.data)),t.send(s.data)},getJSON:function(s,e){he.ajax({url:s,success:e,dataType:"json",headers:{"Content-Type":"text/plain"}})},post:function(s,e,t){return O(this,null,function*(){let o=new be.FormData;Se(e,function(n,r){o.append(r,n)}),o.append("b64","true");let i=yield be.fetch(s,ge({method:"POST",body:o},t));if(i.ok){let n=yield i.text(),r=document.createElement("a");r.href=`data:${e.type};base64,${n}`,r.download=e.filename,r.click(),Ze(r)}})}},{defaultOptions:et,setOptions:tt}=H(),{downloadURL:pe,getScript:it}={dataURLtoBlob:xe,downloadURL:function(s,e){let t=P.navigator,o=Z.createElement("a");if(typeof s!="string"&&!(s instanceof String)&&t.msSaveOrOpenBlob)return void t.msSaveOrOpenBlob(s,e);if(s=""+s,t.userAgent.length>1e3)throw Error("Input too long");let i=/Edge\/\d+/.test(t.userAgent);if((ze&&typeof s=="string"&&s.indexOf("data:application/pdf")===0||i||s.length>2e6)&&!(s=xe(s)||""))throw Error("Failed to convert to blob");if(o.download!==void 0)o.href=s,o.download=e,Z.body.appendChild(o),o.click(),Z.body.removeChild(o);else try{if(!P.open(s,"chart"))throw Error("Failed to open window")}catch{P.location.href=s}},getScript:function(s){return new Promise((e,t)=>{let o=Z.getElementsByTagName("head")[0],i=Z.createElement("script");i.type="text/javascript",i.src=s,i.onload=()=>{e()},i.onerror=()=>{let n=`Error loading script ${s}`;$e(n),t(Error(n))},o.appendChild(i)})}},{composed:nt,doc:B,isFirefox:ot,isMS:ee,isSafari:ce,SVG_NS:rt,win:F}=H(),{addEvent:I,clearTimeout:ue,createElement:$,css:L,discardElement:Ee,error:st,extend:G,find:at,fireEvent:q,isObject:lt,merge:U,objectEach:ct,pick:te,pushUnique:dt,removeEvent:ht,splat:pt,uniqueKey:ut}=H();le().allowedAttributes.push("data-z-index","fill-opacity","filter","preserveAspectRatio","rx","ry","stroke-dasharray","stroke-linejoin","stroke-opacity","text-anchor","transform","transform-origin","version","viewBox","visibility","xmlns","xmlns:xlink"),le().allowedTags.push("desc","clippath","fedropshadow","femorphology","g","image");let Te=F.URL||F.webkitURL||F;class u{constructor(e,t){this.options={},this.chart=e,this.options=t,this.btnCount=0,this.buttonOffset=0,this.divElements=[],this.svgElements=[]}static hyphenate(e){return e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}static imageToDataURL(e,t,o){return O(this,null,function*(){let i=yield u.loadImage(e),n=B.createElement("canvas"),r=n?.getContext("2d");if(r)return n.height=i.height*t,n.width=i.width*t,r.drawImage(i,0,0,n.width,n.height),n.toDataURL(o);throw Error("No canvas found!")})}static fetchCSS(e){return O(this,null,function*(){let t=yield fetch(e).then(i=>i.text()),o=new CSSStyleSheet;return o.replaceSync(t),o})}static handleStyleSheet(e,t){return O(this,null,function*(){try{for(let o of Array.from(e.cssRules)){if(o instanceof CSSImportRule){let i=yield u.fetchCSS(o.href);yield u.handleStyleSheet(i,t)}if(o instanceof CSSFontFaceRule){let i=o.cssText;if(e.href){let n=e.href,r=/url\(\s*(['"]?)(?![a-z]+:|\/\/)([^'")]+?)\1\s*\)/gi;i=i.replace(r,(d,a,l)=>{let g=new URL(l,n).href;return`url(${a}${g}${a})`})}t.push(i)}}}catch{if(e.href){let o=yield u.fetchCSS(e.href);yield u.handleStyleSheet(o,t)}}})}static fetchStyleSheets(){return O(this,null,function*(){let e=[];for(let t of Array.from(B.styleSheets))yield u.handleStyleSheet(t,e);return e})}static inlineFonts(e){return O(this,null,function*(){let t=yield u.fetchStyleSheets(),o=/url\(([^)]+)\)/g,i=[],n=t.join(`
`),r;for(;r=o.exec(n);){let g=r[1].replace(/['"]/g,"");i.includes(g)||i.push(g)}let d=g=>{let b="",h=new Uint8Array(g);for(let c=0;c<h.byteLength;c++)b+=String.fromCharCode(h[c]);return btoa(b)},a={};for(let g of i)try{let b=yield fetch(g),h=b.headers.get("Content-Type")||"",c=d(yield b.arrayBuffer());a[g]=`data:${h};base64,${c}`}catch{}n=n.replace(o,(g,b)=>{let h=b.replace(/['"]/g,"");return`url(${a[h]||h})`});let l=document.createElementNS("http://www.w3.org/2000/svg","style");return l.textContent=n,e.append(l),e})}static loadImage(e){return new Promise((t,o)=>{let i=new F.Image;i.crossOrigin="Anonymous",i.onload=()=>{setTimeout(()=>{t(i)},u.loadEventDeferDelay)},i.onerror=n=>{o(n)},i.src=e})}static prepareImageOptions(e){let t=e?.type||"image/png",o=e?.libURL||et.exporting?.libURL;return{type:t,filename:(e?.filename||"chart")+"."+(t==="image/svg+xml"?"svg":t.split("/")[1]),scale:e?.scale||1,libURL:o?.slice(-1)!=="/"?o+"/":o}}static sanitizeSVG(e,t){let o=e.indexOf("</svg>")+6,i=e.indexOf("<foreignObject")>-1,n=e.substr(o);return e=e.substr(0,o),i?e=e.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />"):n&&t?.exporting?.allowHTML&&(n='<foreignObject x="0" y="0" width="'+t.chart.width+'" height="'+t.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+n.replace(/(<(?:img|br).*?(?=\>))>/g,"$1 />")+"</body></foreignObject>",e=e.replace("</svg>",n+"</svg>")),e=e.replace(/zIndex="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery\d+="[^"]+"/g,"").replace(/url\(("|&quot;)(.*?)("|&quot;)\;?\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS\d+\:)?href=/g," xlink:href=").replace(/\n+/g," ").replace(/&nbsp;/g,"\xA0").replace(/&shy;/g,"\xAD")}static svgToDataURL(e){let t=F.navigator.userAgent,o=t.indexOf("WebKit")>-1&&0>t.indexOf("Chrome");try{if(!o&&e.indexOf("<foreignObject")===-1)return Te.createObjectURL(new F.Blob([e],{type:"image/svg+xml;charset-utf-16"}))}catch{}return"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(e)}addButton(e){let t,o=this,i=o.chart,n=i.renderer,r=U(i.options.navigation?.buttonOptions,e),d=r.onclick,a=r.menuItems,l=r.symbolSize||12;if(r.enabled===!1||!r.theme)return;let g=i.styledMode?{}:r.theme,b=()=>{};d?b=function(c){c&&c.stopPropagation(),d.call(i,c)}:a&&(b=function(c){c&&c.stopPropagation(),o.contextMenu(h.menuClassName,a,h.translateX||0,h.translateY||0,h.width||0,h.height||0,h),h.setState(2)}),r.text&&r.symbol?g.paddingLeft=te(g.paddingLeft,30):r.text||G(g,{width:r.width,height:r.height,padding:0});let h=n.button(r.text||"",0,0,b,g,void 0,void 0,void 0,void 0,r.useHTML).addClass(e.className||"").attr({title:te(i.options.lang[r._titleKey||r.titleKey],"")});h.menuClassName=e.menuClassName||"highcharts-menu-"+o.btnCount++,r.symbol&&(t=n.symbol(r.symbol,Math.round((r.symbolX||0)-l/2),Math.round((r.symbolY||0)-l/2),l,l,{width:l,height:l}).addClass("highcharts-button-symbol").attr({zIndex:1}).add(h),i.styledMode||t.attr({stroke:r.symbolStroke,fill:r.symbolFill,"stroke-width":r.symbolStrokeWidth||1})),h.add(o.group).align(G(r,{width:h.width,x:te(r.x,o.buttonOffset)}),!0,"spacingBox"),o.buttonOffset+=((h.width||0)+(r.buttonSpacing||0))*(r.align==="right"?-1:1),o.svgElements.push(h,t)}afterPrint(){let e=this.chart;if(!this.printReverseInfo)return;let{childNodes:t,origDisplay:o,resetParams:i}=this.printReverseInfo;this.moveContainers(e.renderTo),[].forEach.call(t,function(n,r){n.nodeType===1&&(n.style.display=o[r]||"")}),this.isPrinting=!1,i&&e.setSize.apply(e,i),delete this.printReverseInfo,u.printingChart=void 0,q(e,"afterPrint")}beforePrint(){let e=this.chart,t=B.body,o=this.options.printMaxWidth,i={childNodes:t.childNodes,origDisplay:[],resetParams:void 0};this.isPrinting=!0,e.pointer?.reset(void 0,0),q(e,"beforePrint"),o&&e.chartWidth>o&&(i.resetParams=[e.options.chart.width,void 0,!1],e.setSize(o,void 0,!1)),[].forEach.call(i.childNodes,function(n,r){n.nodeType===1&&(i.origDisplay[r]=n.style.display,n.style.display="none")}),this.moveContainers(t),this.printReverseInfo=i}contextMenu(e,t,o,i,n,r,d){let a=this,l=a.chart,g=l.options.navigation,b=l.chartWidth,h=l.chartHeight,c="cache-"+e,D=Math.max(n,r),k,v=l[c];v||(a.contextMenuEl=l[c]=v=$("div",{className:e},ge({position:"absolute",zIndex:1e3,padding:D+"px",pointerEvents:"auto"},l.renderer.style),l.scrollablePlotArea?.fixedDiv||l.container),k=$("ul",{className:"highcharts-menu"},l.styledMode?{}:{listStyle:"none",margin:0,padding:0},v),l.styledMode||L(k,G({MozBoxShadow:"3px 3px 10px #0008",WebkitBoxShadow:"3px 3px 10px #0008",boxShadow:"3px 3px 10px #0008"},g?.menuStyle||{})),v.hideMenu=function(){L(v,{display:"none"}),d&&d.setState(0),l.exporting&&(l.exporting.openMenu=!1),L(l.renderTo,{overflow:"hidden"}),L(l.container,{overflow:"hidden"}),ue(v.hideTimer),q(l,"exportMenuHidden")},a.events?.push(I(v,"mouseleave",function(){v.hideTimer=F.setTimeout(v.hideMenu,500)}),I(v,"mouseenter",function(){ue(v.hideTimer)}),I(B,"mouseup",function(y){l.pointer?.inClass(y.target,e)||v.hideMenu()}),I(v,"click",function(){l.exporting?.openMenu&&v.hideMenu()})),t.forEach(function(y){if(typeof y=="string"&&a.options.menuItemDefinitions?.[y]&&(y=a.options.menuItemDefinitions[y]),lt(y,!0)){let j;y.separator?j=$("hr",void 0,void 0,k):(y.textKey==="viewData"&&a.isDataTableVisible&&(y.textKey="hideData"),j=$("li",{className:"highcharts-menu-item",onclick:function(De){De&&De.stopPropagation(),v.hideMenu(),typeof y!="string"&&y.onclick&&y.onclick.apply(l,arguments)}},void 0,k),le().setElementHTML(j,y.text||l.options.lang[y.textKey]),l.styledMode||(j.onmouseover=function(){L(this,g?.menuItemHoverStyle||{})},j.onmouseout=function(){L(this,g?.menuItemStyle||{})},L(j,G({cursor:"pointer"},g?.menuItemStyle||{})))),a.divElements.push(j)}}),a.divElements.push(k,v),a.menuHeight=v.offsetHeight,a.menuWidth=v.offsetWidth);let C={display:"block"};o+(a.menuWidth||0)>b?C.right=b-o-n-D+"px":C.left=o-D+"px",i+r+(a.menuHeight||0)>h&&d.alignOptions?.verticalAlign!=="top"?C.bottom=h-i-D+"px":C.top=i+r-D+"px",L(v,C),L(l.renderTo,{overflow:""}),L(l.container,{overflow:""}),l.exporting&&(l.exporting.openMenu=!0),q(l,"exportMenuShown")}destroy(e){let t,o=e?e.target:this.chart,{divElements:i,events:n,svgElements:r}=this;r.forEach((d,a)=>{d&&(d.onclick=d.ontouchstart=null,o[t="cache-"+d.menuClassName]&&delete o[t],r[a]=d.destroy())}),r.length=0,this.group&&(this.group.destroy(),delete this.group),i.forEach(function(d,a){d&&(ue(d.hideTimer),ht(d,"mouseleave"),i[a]=d.onmouseout=d.onmouseover=d.ontouchstart=d.onclick=null,Ee(d))}),i.length=0,n&&(n.forEach(function(d){d()}),n.length=0)}downloadSVG(e,t){return O(this,null,function*(){let o,i={svg:e,exportingOptions:t,exporting:this};if(q(u.prototype,"downloadSVG",i),i.defaultPrevented)return;let{type:n,filename:r,scale:d,libURL:a}=u.prepareImageOptions(t);if(n==="application/pdf")throw Error("Offline exporting logic for PDF type is not found.");if(n==="image/svg+xml"){if(F.MSBlobBuilder!==void 0){let l=new F.MSBlobBuilder;l.append(e),o=l.getBlob("image/svg+xml")}else o=u.svgToDataURL(e);pe(o,r)}else{o=u.svgToDataURL(e);try{u.objectURLRevoke=!0;let l=yield u.imageToDataURL(o,d,n);pe(l,r)}catch(l){if(l.message==="No canvas found!")throw l;if(e.length>1e8)throw Error("Input too long");let g=B.createElement("canvas"),b=g.getContext("2d"),h=e.match(/^<svg[^>]*\s{,1000}width\s{,1000}=\s{,1000}\"?(\d+)\"?[^>]*>/),c=e.match(/^<svg[^>]*\s{0,1000}height\s{,1000}=\s{,1000}\"?(\d+)\"?[^>]*>/);if(b&&h&&c){let D=h[1]*d,k=c[1]*d;g.width=D,g.height=k,F.canvg||(u.objectURLRevoke=!0,yield it(a+"canvg.js")),F.canvg.Canvg.fromString(b,e).start(),pe(F.navigator.msSaveOrOpenBlob?g.msToBlob():g.toDataURL(n),r)}}finally{if(u.objectURLRevoke)try{Te.revokeObjectURL(o)}catch{}}}})}exportChart(e,t){return O(this,null,function*(){if((e=U(this.options,e)).local)yield this.localExport(e,t||{});else{let o=this.getSVGForExport(e,t);e.url&&(yield he.post(e.url,{filename:e.filename?e.filename.replace(/\//g,"-"):this.getFilename(),type:e.type,width:e.width,scale:e.scale,svg:o},e.fetchOptions))}})}fallbackToServer(e,t){return O(this,null,function*(){e.fallbackToExportServer===!1?e.error?e.error(e,t):st(28,!0):e.type==="application/pdf"&&(e.local=!1,yield this.exportChart(e))})}getChartHTML(e){let t=this.chart;return e&&this.inlineStyles(),this.resolveCSSVariables(),t.container.innerHTML}getFilename(){let e=this.chart.userOptions.title?.text,t=this.options.filename;return t?t.replace(/\//g,"-"):(typeof e=="string"&&(t=e.toLowerCase().replace(/<\/?[^>]+(>|$)/g,"").replace(/[\s_]+/g,"-").replace(/[^a-z\d\-]/g,"").replace(/^[\-]+/g,"").replace(/[\-]+/g,"-").substr(0,24).replace(/[\-]+$/g,"")),(!t||t.length<5)&&(t="chart"),t)}getSVG(e){let t=this.chart,o,i,n=U(t.options,e);n.plotOptions=U(t.userOptions.plotOptions,e?.plotOptions),n.time=U(t.userOptions.time,e?.time);let r=$("div",void 0,{position:"absolute",top:"-9999em",width:t.chartWidth+"px",height:t.chartHeight+"px"},B.body),d=t.renderTo.style.width,a=t.renderTo.style.height,l=n.exporting?.sourceWidth||n.chart.width||/px$/.test(d)&&parseInt(d,10)||(n.isGantt?800:600),g=n.exporting?.sourceHeight||n.chart.height||/px$/.test(a)&&parseInt(a,10)||400;G(n.chart,{animation:!1,renderTo:r,forExport:!0,renderer:"SVGRenderer",width:l,height:g}),n.exporting&&(n.exporting.enabled=!1),delete n.data,n.series=[],t.series.forEach(function(c){(i=U(c.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:c.visible})).isInternal||n?.series?.push(i)});let b={};t.axes.forEach(function(c){c.userOptions.internalKey||(c.userOptions.internalKey=ut()),n&&!c.options.isInternal&&(b[c.coll]||(b[c.coll]=!0,n[c.coll]=[]),n[c.coll].push(U(c.userOptions,{visible:c.visible,type:c.type,uniqueNames:c.uniqueNames})))}),n.colorAxis=t.userOptions.colorAxis;let h=new t.constructor(n,t.callback);return e&&["xAxis","yAxis","series"].forEach(function(c){e[c]&&h.update({[c]:e[c]})}),t.axes.forEach(function(c){let D=at(h.axes,k=>k.options.internalKey===c.userOptions.internalKey);if(D){let k=c.getExtremes(),v=pt(e?.[c.coll]||{})[0],C="min"in v?v.min:k.userMin,y="max"in v?v.max:k.userMax;(C!==void 0&&C!==D.min||y!==void 0&&y!==D.max)&&D.setExtremes(C??void 0,y??void 0,!0,!1)}}),o=h.exporting?.getChartHTML(t.styledMode||n.exporting?.applyStyleSheets)||"",q(t,"getSVG",{chartCopy:h}),o=u.sanitizeSVG(o,n),n=void 0,h.destroy(),Ee(r),o}getSVGForExport(e,t){let o=this.options;return this.getSVG(U({chart:{borderRadius:0}},o.chartOptions,t,{exporting:{sourceWidth:e?.sourceWidth||o.sourceWidth,sourceHeight:e?.sourceHeight||o.sourceHeight}}))}inlineStyles(){let e,t=u.inlineDenylist,o=u.inlineAllowlist,i={},n=$("iframe",void 0,{width:"1px",height:"1px",visibility:"hidden"},B.body),r=n.contentWindow?.document;r&&r.body.appendChild(r.createElementNS(rt,"svg")),(function d(a){let l,g,b,h,c,D,k={};if(r&&a.nodeType===1&&u.unstyledElements.indexOf(a.nodeName)===-1){if(l=F.getComputedStyle(a,null),g=a.nodeName==="svg"?{}:F.getComputedStyle(a.parentNode,null),!i[a.nodeName]){e=r.getElementsByTagName("svg")[0],b=r.createElementNS(a.namespaceURI,a.nodeName),e.appendChild(b);let v=F.getComputedStyle(b,null),C={};for(let y in v)y.length<1e3&&typeof v[y]=="string"&&!/^\d+$/.test(y)&&(C[y]=v[y]);i[a.nodeName]=C,a.nodeName==="text"&&delete i.text.fill,e.removeChild(b)}for(let v in l)(ot||ee||ce||Object.hasOwnProperty.call(l,v))&&(function(C,y){if(h=c=!1,o.length){for(D=o.length;D--&&!c;)c=o[D].test(y);h=!c}for(y==="transform"&&C==="none"&&(h=!0),D=t.length;D--&&!h;){if(y.length>1e3)throw Error("Input too long");h=t[D].test(y)||typeof C=="function"}!h&&(g[y]!==C||a.nodeName==="svg")&&i[a.nodeName][y]!==C&&(u.inlineToAttributes&&u.inlineToAttributes.indexOf(y)===-1?k[y]=C:C&&a.setAttribute(u.hyphenate(y),C))})(l[v],v);if(L(a,k),a.nodeName==="svg"&&a.setAttribute("stroke-width","1px"),a.nodeName==="text")return;[].forEach.call(a.children||a.childNodes,d)}})(this.chart.container.querySelector("svg")),e.parentNode.removeChild(e),n.parentNode.removeChild(n)}localExport(e,t){return O(this,null,function*(){let o=this.chart,i,n,r=null,d;if(ee&&o.styledMode&&!u.inlineAllowlist.length&&u.inlineAllowlist.push(/^blockSize/,/^border/,/^caretColor/,/^color/,/^columnRule/,/^columnRuleColor/,/^cssFloat/,/^cursor/,/^fill$/,/^fillOpacity/,/^font/,/^inlineSize/,/^length/,/^lineHeight/,/^opacity/,/^outline/,/^parentRule/,/^rx$/,/^ry$/,/^stroke/,/^textAlign/,/^textAnchor/,/^textDecoration/,/^transform/,/^vectorEffect/,/^visibility/,/^x$/,/^y$/),ee&&(e.type==="application/pdf"||o.container.getElementsByTagName("image").length&&e.type!=="image/svg+xml")||e.type==="application/pdf"&&[].some.call(o.container.getElementsByTagName("image"),function(l){let g=l.getAttribute("href");return g!==""&&typeof g=="string"&&g.indexOf("data:")!==0}))return void(yield this.fallbackToServer(e,Error("Image type not supported for this chart/browser.")));let a=I(o,"getSVG",l=>{n=l.chartCopy.options,d=(i=l.chartCopy.container.cloneNode(!0))&&i.getElementsByTagName("image")||[]});try{let l;for(let h of(this.getSVGForExport(e,t),d?Array.from(d):[]))if(r=h.getAttributeNS("http://www.w3.org/1999/xlink","href")){u.objectURLRevoke=!1;let c=yield u.imageToDataURL(r,e?.scale||1,e?.type||"image/png");h.setAttributeNS("http://www.w3.org/1999/xlink","href",c)}else h.parentNode.removeChild(h);let g=i?.querySelector("svg");g&&!e.chartOptions?.chart?.style?.fontFamily&&(yield u.inlineFonts(g));let b=(l=i?.innerHTML,u.sanitizeSVG(l||"",n));if(b.indexOf("<foreignObject")>-1&&e.type!=="image/svg+xml"&&(ee||e.type==="application/pdf"))throw Error("Image type not supported for charts with embedded HTML");return yield this.downloadSVG(b,G({filename:this.getFilename()},e)),b}catch(l){yield this.fallbackToServer(e,l)}finally{a()}})}moveContainers(e){let t=this.chart,{scrollablePlotArea:o}=t;(o?[o.fixedDiv,o.scrollingContainer]:[t.container]).forEach(function(i){e.appendChild(i)})}print(){let e=this.chart;this.isPrinting||(u.printingChart=e,ce||this.beforePrint(),setTimeout(()=>{F.focus(),F.print(),ce||setTimeout(()=>{e.exporting?.afterPrint()},1e3)},1))}render(){let e=this,{chart:t,options:o}=e,i=e?.isDirty||!e?.svgElements.length;e.buttonOffset=0,e.isDirty&&e.destroy(),i&&o.enabled!==!1&&(e.events=[],e.group||(e.group=t.renderer.g("exporting-group").attr({zIndex:3}).add()),ct(o?.buttons,function(n){e.addButton(n)}),e.isDirty=!1)}resolveCSSVariables(){Array.from(this.chart.container.querySelectorAll("*")).forEach(e=>{["color","fill","stop-color","stroke"].forEach(t=>{e.getAttribute(t)?.includes("var(")&&e.setAttribute(t,getComputedStyle(e).getPropertyValue(t)),e.style?.[t]?.includes("var(")&&(e.style[t]=getComputedStyle(e).getPropertyValue(t))})})}update(e,t){this.isDirty=!0,U(!0,this.options,e),te(t,!0)&&this.chart.redraw()}}u.inlineAllowlist=[],u.inlineDenylist=[/-/,/^(clipPath|cssText|d|height|width)$/,/^font$/,/[lL]ogical(Width|Height)$/,/^parentRule$/,/^(cssRules|ownerRules)$/,/perspective/,/TapHighlightColor/,/^transition/,/^length$/,/^\d+$/],u.inlineToAttributes=["fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","textAnchor","x","y"],u.loadEventDeferDelay=150*!!ee,u.unstyledElements=["clipPath","defs","desc"],(function(s){function e(i){let n=i.exporting;n&&(n.render(),I(i,"redraw",function(){this.exporting?.render()}),I(i,"destroy",function(){this.exporting?.destroy()}))}function t(){let i=this;i.options.exporting&&(i.exporting=new s(i,i.options.exporting),We.compose(i).navigation.addUpdate((n,r)=>{i.exporting&&(i.exporting.isDirty=!0,U(!0,i.options.navigation,n),te(r,!0)&&i.redraw())}))}function o({alignTo:i,key:n,textPxLength:r}){let d=this.options.exporting,{align:a,buttonSpacing:l=0,verticalAlign:g,width:b=0}=U(this.options.navigation?.buttonOptions,d?.buttons?.contextButton),h=i.width-r,c=b+l;(d?.enabled??!0)&&n==="title"&&a==="right"&&g==="top"&&h<2*c&&(h<c?i.width-=c:this.title?.alignValue!=="left"&&(i.x-=c-h/2))}s.compose=function(i,n){Qe.compose(n),ve.compose(i),dt(nt,"Exporting")&&(G(je().prototype,{exportChart:function(r,d){return O(this,null,function*(){yield this.exporting?.exportChart(r,d)})},getChartHTML:function(r){return this.exporting?.getChartHTML(r)},getFilename:function(){return this.exporting?.getFilename()},getSVG:function(r){return this.exporting?.getSVG(r)},print:function(){return this.exporting?.print()}}),i.prototype.callbacks.push(e),I(i,"afterInit",t),I(i,"layOutTitle",o),ce&&F.matchMedia("print").addListener(function(r){s.printingChart&&(r.matches?s.printingChart.exporting?.beforePrint():s.printingChart.exporting?.afterPrint())}),tt(Ke))}})(u||(u={}));let Ce=u,_=H();_.Exporting=Ce,_.HttpUtilities=_.HttpUtilities||he,_.ajax=_.HttpUtilities.ajax,_.getJSON=_.HttpUtilities.getJSON,_.post=_.HttpUtilities.post,Ce.compose(_.Chart,_.Renderer);let gt=H();return w.default})())});var Y=Oe(mt());var Ve=Oe(_e());var yt=["graficoRef"],xt=["testRef"],wt=["grafico_dia_ref"],vt=["graficoTurnosMedico"],bt=["graficoTurnosFinalizados"],Ie=class A{serv_logs=ie(Le);serv_usuario=ie(He);serv_turnos=ie(Ue);serv_especialidades=ie(Pe);listaLogs=[];listaUsuarios=[];listaTurnos=[];listaEspecialidadesActuales=[];graficoRef;testRef;grafico_dia_ref;graficoTurnosMedico;graficoTurnosFinalizados;fechaDesde="";fechaHasta="";testeando=Ve.default;constructor(){}ngAfterViewInit(){return O(this,null,function*(){yield this.cargarDatos(),this.generarGraficoPrincipal(),this.test(),this.graficoTurnosPorDia()})}cargarDatos(){return O(this,null,function*(){this.listaLogs=yield this.serv_logs.getAllLogs(),this.listaUsuarios=yield this.serv_usuario.getAllUsuarios(),this.listaTurnos=yield this.serv_turnos.getAllTurnos(),this.listaEspecialidadesActuales=yield this.serv_especialidades.getAllEspecialidades(),console.log(this.listaTurnos,"turnos obtenidos")})}generarGraficoPrincipal(){let m=this.graficoRef.nativeElement;if(!m)return;let x=this.generarScatterSeries();Y.default.chart(m,{chart:{type:"scatter"},title:{text:"Ingresos por usuario (d\xEDa y horario)"},xAxis:{type:"datetime",title:{text:"Fecha y hora"}},yAxis:{title:{text:"Usuarios"},categories:this.listaUsuarios.map(p=>`${p.Nombre} ${p.Apellido}`),tickInterval:1},series:x})}generarScatterSeries(){let m=[];return this.listaUsuarios.forEach((x,p)=>{let f=this.listaLogs.filter(E=>E.uid_usuario===x.uid).map(E=>{let S=this.normalizarFecha(E.log_in);return S?{x:S.getTime(),y:p}:null}).filter(E=>E!==null);m.push({type:"scatter",name:`${x.Nombre} ${x.Apellido}`,data:f})}),m}normalizarFecha(m){if(!m)return null;if(m instanceof Date)return m;if(m.seconds!=null)return new Date(m.seconds*1e3);if(typeof m=="string"){let x=new Date(m);return isNaN(x.getTime())?null:x}if(typeof m=="number"){let x=new Date(m);return isNaN(x.getTime())?null:x}return null}test(){let m=this.testRef.nativeElement;if(!m){console.error("\u274C No se encontr\xF3 el contenedor #test");return}let x=this.listaEspecialidadesActuales.map(f=>f.nombre),p=this.listaEspecialidadesActuales.map(f=>this.listaTurnos.filter(E=>E.especialidad===f.uid).length);Y.default.chart(m,{chart:{type:"column"},title:{text:"Cantidad de turnos por especialidad"},xAxis:{categories:x,title:{text:"Especialidades"},crosshair:!0},yAxis:{min:0,title:{text:"Cantidad de turnos"}},series:[{name:"Turnos",type:"column",data:p}]})}graficoTurnosPorDia(){let m=this.grafico_dia_ref.nativeElement;if(!m){console.error("\u274C No se encontr\xF3 el contenedor #graficoDias");return}let x=["Dom","Lun","Mar","Mi\xE9","Jue","Vie","S\xE1b"],p=[0,0,0,0,0,0,0];this.listaTurnos.forEach(f=>{if(!f.fecha)return;let E=new Date(f.fecha);if(isNaN(E.getTime())&&f.fecha.includes("/")){let[S,T,w]=f.fecha.split("/");E=new Date(`${w}-${T}-${S}`)}if(!isNaN(E.getTime())){let S=E.getDay();p[S]++}}),Y.default.chart(m,{chart:{type:"column"},title:{text:"Cantidad de turnos por d\xEDa de la semana"},xAxis:{categories:x,title:{text:"D\xEDa"},crosshair:!0},yAxis:{min:0,title:{text:"Cantidad de turnos"}},series:[{name:"Turnos",type:"column",data:p}]})}generarGraficoTurnosPorMedico(){if(!this.fechaDesde||!this.fechaHasta){console.log("Seleccione ambas fechas");return}let m=new Date(this.fechaDesde+"T00:00:00"),x=new Date(this.fechaHasta+"T23:59:59"),p=this.graficoTurnosMedico.nativeElement;if(!p)return;let f=this.listaTurnos.filter(w=>{if(!w.fecha_emision)return!1;let N;return"seconds"in w.fecha_emision?N=w.fecha_emision.toDate?w.fecha_emision.toDate():new Date(w.fecha_emision.seconds*1e3):N=new Date(w.fecha_emision),N>=m&&N<=x});console.log("Turnos filtrados:",f);let E=this.listaUsuarios.filter(w=>w.rol==="Especialista"),S=E.map(w=>`${w.Nombre} ${w.Apellido}`),T=E.map(w=>f.filter(N=>N.id_especialista.id===w.uid).length);console.log(T,"estoy filtrando esto"),Y.default.chart(p,{chart:{type:"column"},title:{text:"Turnos solicitados por m\xE9dico en el rango seleccionado"},xAxis:{categories:S,title:{text:"M\xE9dicos"}},yAxis:{min:0,title:{text:"Cantidad de turnos solicitados"}},series:[{name:"Solicitudes",type:"column",data:T}]})}generarGraficoTurnosFinalizados(){if(!this.fechaDesde||!this.fechaHasta){alert("Seleccione ambas fechas");return}let m=new Date(this.fechaDesde),x=new Date(this.fechaHasta);x.setHours(23,59,59);let p=this.graficoTurnosFinalizados.nativeElement;if(!p)return;let f=this.listaTurnos.filter(w=>{if(!w.fecha_emision)return!1;let N;return"seconds"in w.fecha_emision?N=w.fecha_emision.toDate?w.fecha_emision.toDate():new Date(w.fecha_emision.seconds*1e3):N=new Date(w.fecha_emision),N>=m&&N<=x&&w.estado==="finalizado"}),E=this.listaUsuarios.filter(w=>w.rol==="Especialista"),S=E.map(w=>`${w.Nombre} ${w.Apellido}`),T=E.map(w=>f.filter(N=>N.id_especialista.id===w.uid).length);Y.default.chart(p,{chart:{type:"column"},title:{text:"Turnos finalizados por m\xE9dico en el rango seleccionado"},xAxis:{categories:S,title:{text:"M\xE9dicos"}},yAxis:{min:0,title:{text:"Cantidad de turnos finalizados"}},series:[{name:"Finalizados",type:"column",data:T}]})}static \u0275fac=function(x){return new(x||A)};static \u0275cmp=Fe({type:A,selectors:[["app-estadisticas"]],viewQuery:function(x,p){if(x&1&&(Q(yt,5),Q(xt,5),Q(wt,5),Q(vt,5),Q(bt,5)),x&2){let f;J(f=X())&&(p.graficoRef=f.first),J(f=X())&&(p.testRef=f.first),J(f=X())&&(p.grafico_dia_ref=f.first),J(f=X())&&(p.graficoTurnosMedico=f.first),J(f=X())&&(p.graficoTurnosFinalizados=f.first)}},decls:37,vars:4,consts:[["graficoRef",""],["testRef",""],["grafico_dia_ref",""],["graficoTurnosMedico",""],["graficoTurnosFinalizados",""],["id","grafico",2,"width","100%","height","400px"],["id","test",2,"width","100%","height","400px"],["id","grafico_dia_ref",2,"width","100%","height","400px"],[1,"card"],["type","date",3,"ngModelChange","ngModel"],[3,"click"],[2,"width","100%","height","400px","margin-top","20px"],[1,"rango-fechas"],[2,"width","100%","height","400px"]],template:function(x,p){if(x&1){let f=Re();M(0,"section"),K(1,"div",5,0),R(),M(3,"section"),K(4,"div",6,1),R(),M(6,"section"),K(7,"div",7,2),R(),M(9,"section")(10,"div",8)(11,"h2"),V(12,"Cantidad de turnos solicitados por m\xE9dico"),R(),M(13,"label"),V(14,"Fecha desde"),R(),M(15,"input",9),se("ngModelChange",function(S){return W(f),re(p.fechaDesde,S)||(p.fechaDesde=S),z(S)}),R(),M(16,"label"),V(17,"Fecha hasta"),R(),M(18,"input",9),se("ngModelChange",function(S){return W(f),re(p.fechaHasta,S)||(p.fechaHasta=S),z(S)}),R(),M(19,"button",10),fe("click",function(){return W(f),z(p.generarGraficoTurnosPorMedico())}),V(20,"Generar gr\xE1fico"),R()(),K(21,"div",11,3),R(),M(23,"section")(24,"h2"),V(25,"Cantidad de turnos Finalizados por m\xE9dico"),R(),M(26,"div",12)(27,"label"),V(28,"Desde:"),R(),M(29,"input",9),se("ngModelChange",function(S){return W(f),re(p.fechaDesde,S)||(p.fechaDesde=S),z(S)}),R(),M(30,"label"),V(31,"Hasta:"),R(),M(32,"input",9),se("ngModelChange",function(S){return W(f),re(p.fechaHasta,S)||(p.fechaHasta=S),z(S)}),R(),M(33,"button",10),fe("click",function(){return W(f),z(p.generarGraficoTurnosFinalizados())}),V(34,"Generar gr\xE1fico"),R()(),K(35,"div",13,4),R()}x&2&&(ne(15),oe("ngModel",p.fechaDesde),ne(3),oe("ngModel",p.fechaHasta),ne(11),oe("ngModel",p.fechaDesde),ne(3),oe("ngModel",p.fechaHasta))},dependencies:[ke,Me,Ae,Ne],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}section[_ngcontent-%COMP%]{width:80%;margin-top:40px}"]})};export{Ie as Estadisticas};
