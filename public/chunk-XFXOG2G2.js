import{a as rt}from"./chunk-FCTZEXYD.js";import{b as j,c as q,d as Q,e as X,f as G,g as J,h as K,i as W,j as Z,k as tt,l as et}from"./chunk-2I5LHVDV.js";import{a as nt,b as ot}from"./chunk-6AWODL63.js";import{a as V}from"./chunk-PBCS3AN4.js";import"./chunk-F34TZV5U.js";import{f as it,i as at}from"./chunk-AVTA2URI.js";import"./chunk-XLBLZLZD.js";import{a as E,b as v,c as T,d as O,f as D,g as I,h as L,i as k,j as A,k as F,l as N,m as R,p as H,q as U,r as z,s as B,t as Y,v as $}from"./chunk-ASAGM7SV.js";import"./chunk-BYXBJQAS.js";import"./chunk-WKMSXF5P.js";import{d as y}from"./chunk-E7BGHA2P.js";import"./chunk-QFAIQ2LR.js";import"./chunk-SGZLCR6E.js";import{$c as w,Fb as p,Gb as a,Hb as n,Ib as d,Mb as c,Nb as m,Pb as b,Rb as S,Tb as C,Ya as r,ea as P,fc as o,hc as u,ja as h,ka as x,nb as M,sb as s}from"./chunk-7EJ4QSIG.js";import"./chunk-FK6H3RFT.js";import{g}from"./chunk-RA2WU32H.js";function lt(t,e){t&1&&(a(0,"th",13),o(1," Nombre "),n())}function ct(t,e){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=e.$implicit;r(),u(" ",i.Nombre||"N/A"," ")}}function mt(t,e){if(t&1&&(a(0,"th",13),o(1," Apellidos "),a(2,"button",15),d(3,"fa-icon",16),n()()),t&2){let i=C();r(3),p("icon",i.faSort)}}function pt(t,e){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=e.$implicit;r(),u(" ",i.Apellido||"N/A"," ")}}function dt(t,e){if(t&1&&(a(0,"th",13),o(1," Correo Electronico"),a(2,"button",15),d(3,"fa-icon",16),n()()),t&2){let i=C();r(3),p("icon",i.faSort)}}function ft(t,e){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=e.$implicit;r(),u(" ",i.Email," ")}}function ut(t,e){t&1&&(a(0,"th",13),o(1," DNI "),n())}function _t(t,e){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=e.$implicit;r(),u(" ",i.DNI," ")}}function Ct(t,e){t&1&&(a(0,"th",13),o(1," Obra Social "),n())}function gt(t,e){if(t&1&&(a(0,"td",14),o(1),n()),t&2){let i=e.$implicit;r(),u(" ",i.ObraSocial," ")}}function Pt(t,e){t&1&&(a(0,"th",13),o(1," Img Perfil "),n())}function ht(t,e){t&1&&d(0,"td",14)}function xt(t,e){t&1&&(a(0,"th",13),o(1," Acciones "),n())}function Mt(t,e){if(t&1){let i=b();a(0,"td",14)(1,"button",17),S("click",function(){let l=h(i).$implicit,_=C();return x(_.generarHistoriaClinicaDelPacienteSeleccionado(l))}),d(2,"fa-icon",16),n()()}if(t&2){let i=C();r(2),p("icon",i.faFilePdf)}}function bt(t,e){t&1&&d(0,"tr",18)}function St(t,e){t&1&&d(0,"tr",19)}var st=class t{serv_Turnos=P(V);serv_Usuarios=P(y);serv_pdf=P(rt);usuarioLogeado=null;rolUsuario;soy_especialista=!1;soy_paciente=!1;soy_admin=!1;listaPacientes=[];displayedColumns=[];faEdit=F;faTrash=A;faAdd=$;faCancel=k;faBan=L;faCalendarCheck=T;faCalendarXmark=U;faPowerOff=D;faMessage=O;faFileSignatura=N;faSort=H;faStar=B;faFileLines=z;faRankingStar=I;faClipBoardQuestion=R;faFilePdf=Y;ngOnInit(){return g(this,null,function*(){let e=yield this.serv_Usuarios.getUserLoged();switch(e?.rol){case"Especialista":this.usuarioLogeado=e,this.otenerPacientesDelEspecialista(),console.log(this.listaPacientes,"mis pacientes"),this.soy_especialista=e.rol==="Especialista",this.displayedColumns=["Nombre","Apellido","Email","DNI","ObraSocial","acciones"],this.rolUsuario="Especialista";break;case"admin":this.usuarioLogeado=e,this.otenerTodosLosPacientes(),this.soy_admin=e.rol==="admin",this.displayedColumns=["Nombre","Apellido","Email","DNI","ObraSocial","acciones"],this.rolUsuario="admin";break}})}otenerPacientesDelEspecialista(){return g(this,null,function*(){if(!this.usuarioLogeado?.uid)return;let e=yield this.serv_Turnos.getTurnosPorFiltros([{columna:"id_especialista",valor:this.usuarioLogeado.uid},{columna:"estado",valor:"finalizado"}]);if(e.length===0){this.listaPacientes=[];return}let i=new Map;for(let l of e){let _=l.id_paciente.id;i.has(_)||i.set(_,[]),i.get(_).push(l)}let f=yield Promise.all(Array.from(i.keys()).map(l=>this.serv_Usuarios.obtenerUsuario(l)));this.listaPacientes=f.filter(l=>l!=null)})}otenerTodosLosPacientes(){return g(this,null,function*(){this.listaPacientes=yield this.serv_Usuarios.getUsuariosByCampo("rol","Paciente")})}generarHistoriaClinicaDelPacienteSeleccionado(e){this.serv_pdf.generarHistoriaClinicaPDF("assets/icon/apple-icon-180x180.png",e.uid)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=M({type:t,selectors:[["app-lista-pacientes"]],decls:27,vars:3,consts:[[1,"contenedor"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","Nombre"],["mat-header-cell","","class","mat-header-row",4,"matHeaderCellDef"],["mat-cell","","class","mat-cell",4,"matCellDef"],["matColumnDef","Apellido"],["matColumnDef","Email"],["matColumnDef","DNI"],["matColumnDef","ObraSocial"],["matColumnDef","ImagenesDePerfil"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"mat-header-row"],["mat-cell","",1,"mat-cell"],["type","button","mat-icon-button","","color","primary","matTooltip","Ordenar por "],[3,"icon"],["type","button","mat-icon-button","","matTooltip"," Generar Historia Clinica","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,f){i&1&&(a(0,"form",0)(1,"h2"),o(2," Mis Pacientes "),n(),a(3,"table",1),c(4,2),s(5,lt,2,0,"th",3)(6,ct,2,1,"td",4),m(),c(7,5),s(8,mt,4,1,"th",3)(9,pt,2,1,"td",4),m(),c(10,6),s(11,dt,4,1,"th",3)(12,ft,2,1,"td",4),m(),c(13,7),s(14,ut,2,0,"th",3)(15,_t,2,1,"td",4),m(),c(16,8),s(17,Ct,2,0,"th",3)(18,gt,2,1,"td",4),m(),c(19,9),s(20,Pt,2,0,"th",3)(21,ht,1,0,"td",4),m(),c(22,10),s(23,xt,2,0,"th",3)(24,Mt,3,1,"td",4),m(),s(25,bt,1,0,"tr",11)(26,St,1,0,"tr",12),n()()),i&2&&(r(3),p("dataSource",f.listaPacientes),r(22),p("matHeaderRowDef",f.displayedColumns),r(),p("matRowDefColumns",f.displayedColumns))},dependencies:[w,v,E,et,j,Q,K,X,q,W,G,J,Z,tt,at,it,ot,nt],styles:[".contenedor[_ngcontent-%COMP%]{width:100%;max-width:1500px;margin:20px auto;opacity:0;transform:translateY(-20px);animation:_ngcontent-%COMP%_desplegar .5s forwards}@keyframes _ngcontent-%COMP%_desplegar{to{opacity:1;transform:translateY(0)}}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-weight:600;color:#37474f;opacity:0;transform:translateY(-20px);animation:_ngcontent-%COMP%_desplegar .5s forwards .1s}table[_ngcontent-%COMP%]{width:100%;border-radius:10px;overflow:hidden;opacity:0;transform:translateY(-20px);animation:_ngcontent-%COMP%_desplegar .5s forwards .2s}.mat-header-row[_ngcontent-%COMP%]{background:#56baed!important;color:#fff!important;font-weight:700}.mat-header-cell[_ngcontent-%COMP%]{font-size:14px;letter-spacing:.5px;padding:14px 10px!important}.mat-cell[_ngcontent-%COMP%]{padding:12px 10px!important;font-size:14px;color:#333;vertical-align:middle}.mat-row[_ngcontent-%COMP%]:nth-child(2n){background:#f7f9fc;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_desplegarFila .5s forwards;animation-delay:calc(var(--row-index) * .05s)}.mat-row[_ngcontent-%COMP%]:hover{background:#e3f2fd;cursor:pointer}@keyframes _ngcontent-%COMP%_desplegarFila{to{opacity:1;transform:translateY(0)}}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], td[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:18px}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 3px}.mat-tooltip[_ngcontent-%COMP%]{font-size:13px}button.solicitar-btn[_ngcontent-%COMP%]{margin-top:20px;background:gray;color:#fff;border-radius:6px;padding:10px 16px;font-size:15px;display:flex;align-items:center;gap:6px;opacity:0;transform:translateY(-20px);animation:_ngcontent-%COMP%_desplegar .5s forwards .3s}button.solicitar-btn[_ngcontent-%COMP%]:hover{background:#56baed}fa-icon[_ngcontent-%COMP%]{color:#56baed;margin-right:2px}fa-icon.estrella[_ngcontent-%COMP%]{color:#ffca28}"]})};export{st as ListaPacientes};
